_prefs: 
  disabled: []
  inspector: false
  mapid: ''
  rev: ''
  saveCenter: true
attribution: ''
center: 
  - -122.3911
  - 37.7924
  - 13
description: ''
Layer: 
  - id: landuse
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |
        (
        SELECT
            osm_id,
            way,
            CASE
              WHEN landuse IN ('wood', 'forest') THEN 'wood'
              WHEN leisure IN ('national_reserve', 'nature_reserve', 'golf_course') OR boundary = 'national_park' THEN 'park'
              WHEN landuse IN ('cemetery', 'industrial') THEN landuse
              WHEN aeroway IS NOT NULL THEN 'industrial'
              WHEN landuse = 'village_green' OR leisure IN ('park', 'playground') THEN 'park'
              WHEN amenity IN ('school', 'university') THEN 'school'
              WHEN amenity = 'hospital' THEN 'hospital'
              ELSE NULL
            END AS class,
            z_order,
            way_area
          FROM planet_osm_polygon
          WHERE
            (
                (
                    (
                      landuse IN ('wood', 'forest')
                      OR leisure IN ('national_reserve', 'nature_reserve', 'golf_course')
                      OR boundary = 'national_park'
                    )
                    AND mb_z(!scale_denominator!) >= 7
                ) OR (
                    (
                      landuse IN ('cemetery', 'industrial', 'village_green')
                      OR aeroway IS NOT NULL
                      OR leisure IN ('park', 'playground')
                      OR amenity IN ('school', 'university')
                    )
                    AND mb_z(!scale_denominator!) >= 10
                ) OR (
                    amenity = 'hospital'
                    AND mb_z(!scale_denominator!) >= 12
                )
            )
            AND way && !bbox!
            ORDER BY z_order, way_area DESC
        ) landuse
      type: postgis
      user: ''
    description: ''
    fields: 
      class: String
      osm_id: Number
      way_area: Number
      z_order: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: waterway
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT osm_id, way, waterway AS class
          FROM planet_osm_line
          WHERE waterway IN ('river', 'canal')
          AND mb_z(!scale_denominator!) >= 8
          AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, waterway AS class
          FROM planet_osm_line
          WHERE waterway IN ('stream', 'stream_intermittent')
          AND mb_z(!scale_denominator!) >= 13
          AND way && !bbox!
        ) waterway
      type: postgis
      user: ''
    description: ''
    fields: 
      class: String
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: water
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: way
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT osm_id, way
          FROM planet_osm_polygon
          WHERE
            (
              "natural" IN ('water', 'bay')
              OR waterway IS NOT NULL
              OR landuse = 'reservoir'
              OR landuse = 'pond'
            )
            AND
            (
              mb_z(!scale_denominator!) >= 14
              OR way_area >= 5000000000 / 2.3^mb_z(!scale_denominator!)
            )
            AND way && !bbox!
        UNION ALL
        SELECT 0 AS osm_id, way
          FROM water_polygons
          WHERE
            way && !bbox!
        ) water
      type: postgis
      user: ''
    description: ''
    fields: 
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: aeroway
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT osm_id, way, aeroway AS type
          FROM planet_osm_polygon
          WHERE
            aeroway IS NOT NULL
            AND aeroway <> 'aerodrome'
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, aeroway AS type
          FROM planet_osm_line
          WHERE
            aeroway IS NOT NULL
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        ) aeroway
      type: postgis
      user: ''
    description: ''
    fields: 
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: building
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
          SELECT osm_id, way
            FROM planet_osm_polygon
            WHERE
              mb_z(!scale_denominator!) >= 14
              AND building IS NOT NULL
              AND building <> 'no'
              AND way && !bbox!
        ) building
      type: postgis
      user: ''
    description: ''
    fields: 
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: tunnel
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT osm_id, way, 'motorway' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('motorway')
            AND mb_z(!scale_denominator!) >= 5
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'motorway_link' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('motorway_link')
            AND mb_z(!scale_denominator!) >= 13
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('primary', 'primary_link', 'trunk', 'trunk_link')
            AND mb_z(!scale_denominator!) >= 5
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('secondary', 'secondary_link')
            AND mb_z(!scale_denominator!) >= 9
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('tertiary', 'tertiary_link')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('residential', 'unclassified', 'living_street')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street_limited' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND (highway IN ('pedestrian', 'construction') or access = 'private')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'service' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('service', 'track')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'driveway' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('driveway')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'path' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('path', 'cycleway', 'ski', 'steps', 'bridleway')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'major_rail' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('rail', 'monorail', 'narrow_gauge', 'subway', 'tram')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'minor_rail' AS class
          FROM  planet_osm_line
          WHERE
            tunnel IS NOT NULL
            AND tunnel <> 'no'
            AND highway IN ('funicular', 'light_rail', 'preserved')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        ) tunnel
      type: postgis
      user: ''
    description: ''
    fields: 
      class: String
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: road
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: way
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |
        (
        SELECT osm_id, way, 'motorway' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('motorway')
            AND mb_z(!scale_denominator!) >= 5
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'motorway_link' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('motorway_link')
            AND mb_z(!scale_denominator!) >= 13
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('primary', 'primary_link', 'trunk', 'trunk_link')
            AND mb_z(!scale_denominator!) >= 7
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('secondary', 'secondary_link')
            AND mb_z(!scale_denominator!) >= 9
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('tertiary', 'tertiary_link')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('residential', 'unclassified', 'living_street')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('residential', 'unclassified', 'living_street')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street_limited' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND (highway IN ('pedestrian', 'construction') or access = 'private')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'service' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('service', 'track')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'driveway' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('driveway')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'path' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND highway IN ('path', 'cycleway', 'ski', 'steps', 'bridleway', 'footway')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'major_rail' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND railway IN ('rail', 'monorail', 'narrow_gauge', 'subway', 'tram')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'minor_rail' AS class
          FROM  planet_osm_line
          WHERE
            (bridge IS NULL OR bridge = 'no')
            AND (tunnel IS NULL OR tunnel = 'no')
            AND railway IN ('funicular', 'light_rail', 'preserved')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        ) road
      type: postgis
      user: ''
    description: ''
    fields: 
      class: String
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: bridge
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT osm_id, way, 'motorway' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('motorway')
            AND mb_z(!scale_denominator!) >= 5
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'motorway_link' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('motorway_link')
            AND mb_z(!scale_denominator!) >= 13
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('primary', 'primary_link', 'trunk', 'trunk_link')
            AND mb_z(!scale_denominator!) >= 5
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('secondary', 'secondary_link')
            AND mb_z(!scale_denominator!) >= 9
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'main' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('tertiary', 'tertiary_link')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('residential', 'unclassified', 'living_street')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'street_limited' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND (highway IN ('pedestrian', 'construction') or access = 'private')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'service' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('service', 'track')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'driveway' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('driveway')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'path' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('path', 'cycleway', 'ski', 'steps', 'bridleway')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'major_rail' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('rail', 'monorail', 'narrow_gauge', 'subway', 'tram')
            AND mb_z(!scale_denominator!) >= 12
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, way, 'minor_rail' AS class
          FROM  planet_osm_line
          WHERE
            bridge IS NOT NULL
            AND bridge <> 'no'
            AND highway IN ('funicular', 'light_rail', 'preserved')
            AND mb_z(!scale_denominator!) >= 15
            AND way && !bbox!
        ) bridge
      type: postgis
      user: ''
    description: ''
    fields: 
      class: String
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: admin
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT
            r.osm_id, r.way,
            CAST (r.admin_level AS SMALLINT),
            CASE
              WHEN r.tags->'maritime' = 'yes' THEN 1
              ELSE
                CASE WHEN w.way IS NULL THEN 0 ELSE 1 END
            END AS maritime
          FROM planet_osm_roads r LEFT JOIN water_polygons w ON r.way && w.way
          WHERE
            boundary = 'administrative'
            AND (
              ( admin_level = '2' AND mb_z(!scale_denominator!) >= 2 )
              OR ( admin_level = '4' AND mb_z(!scale_denominator!) >= 3 )
            )
            AND r.way && !bbox!
        ) admin
      type: postgis
      user: ''
    description: ''
    fields: 
      admin_level: String
      maritime: Number
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: country_label
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT osm_id, way, name AS name_en, CASE
              WHEN CAST(population AS int) >= 250000000 THEN 1
              WHEN CAST(population AS int) >= 100000000 AND CAST(population AS int) < 250000000 THEN 2
              WHEN CAST(population AS int) >= 50000000 AND CAST(population AS int) < 100000000 THEN 3
              WHEN CAST(population AS int) >= 25000000 AND CAST(population AS int) < 50000000 THEN 4
              WHEN CAST(population AS int) >= 10000000 AND CAST(population AS int) < 25000000 THEN 5
              WHEN CAST(population AS int) < 10000000 THEN 6
            END scalerank
          FROM planet_osm_point
          WHERE
            place = 'country'
            AND mb_z(!scale_denominator!) < 12
            AND way && !bbox!
        ) country_label
      type: postgis
      user: ''
    description: ''
    fields: 
      name_en: String
      osm_id: Number
      scalerank: Number
    properties: 
      "buffer-size": 64
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: place_label
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |-
        (
        SELECT DISTINCT ON(mb_labelgrid(way, 64, !pixel_width!)) * FROM(
        (SELECT osm_id, way, name AS name_en, place AS "type",
            'SE' AS ldir, 1 AS localrank
          FROM planet_osm_point
          WHERE
            place = 'city'
            AND mb_z(!scale_denominator!) >= 4
            AND way && !bbox!
            -- On zoom 4, display cities with 1M+ population. Decrease by 250k every level
            AND (to_int(population) + mb_z(!scale_denominator!) * 250000 - 2000000) > 0
          ORDER BY to_int(population) DESC
        )
        UNION ALL
        (SELECT osm_id, way, name AS name_en, place AS "type",
            'SE' AS ldir, 2 AS localrank
          FROM planet_osm_point
          WHERE
            place = 'town'
            AND mb_z(!scale_denominator!) >= 9
            AND way && !bbox!
          ORDER BY to_int(population) DESC
        )
        UNION ALL
        (SELECT osm_id, way, name AS name_en, place AS "type",
            'SE' AS ldir, 3 AS localrank
          FROM planet_osm_point
          WHERE
            place = 'village'
            AND mb_z(!scale_denominator!) >= 11
            AND way && !bbox!
          ORDER BY to_int(population) DESC
        )
        UNION ALL
        (SELECT osm_id, way, name AS name_en, place AS "type",
            'SE' AS ldir, 3 AS localrank
          FROM planet_osm_point
          WHERE
            place IN ('hamlet', 'suburb','neighbourhood')
            AND name IS NOT NULL
            AND mb_z(!scale_denominator!) >= 13
            AND way && !bbox!
          ORDER BY to_int(population) DESC
        )
        ) data
        ) place_label
      type: postgis
      user: ''
    description: ''
    fields: 
      ldir: String
      localrank: Number
      name_en: String
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 64
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: road_label
    Datasource: 
      dbname: gis
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: ''
      key_field: ''
      max_size: 512
      password: ''
      port: ''
      table: |
        (
        SELECT osm_id, 'default' AS shield, way, name AS name_en, ref, char_length(ref) AS reflen,
          ROUND(mb_merc_length(way)) AS len
          FROM planet_osm_roads
          WHERE
            highway IN ('motorway', 'primary', 'primary_link', 'trunk', 'trunk_link', 'secondary', 'secondary_link', 'tertiary', 'tertiary_link', 'residential', 'unclassified', 'living_street')
            AND ( name IS NOT NULL OR ref IS NOT NULL)
            AND mb_z(!scale_denominator!) >= 11
            --AND mb_linelabel(mb_z(!scale_denominator!), name, way)
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, 'default' AS shield, way, name AS name_en, '' AS ref, 0 AS reflen,
          ROUND(mb_merc_length(way)) AS len
          FROM planet_osm_roads
          WHERE
            highway IN ('motorway_link')
            AND name IS NOT NULL
            AND mb_z(!scale_denominator!) >= 13
            --AND mb_linelabel(mb_z(!scale_denominator!), name, way)
            AND way && !bbox!
        UNION ALL
        SELECT osm_id, 'default' AS shield, way, name AS name_en, '' AS ref, 0 AS reflen,
          ROUND(mb_merc_length(way)) AS len
          FROM planet_osm_roads
          WHERE
            highway IN ('service', 'track', 'driveway', 'path', 'cycleway', 'ski', 'steps', 'bridleway')
            AND name IS NOT NULL
            AND mb_z(!scale_denominator!) >= 15
            --AND mb_linelabel(mb_z(!scale_denominator!), name, way)
            AND way && !bbox!
        ) AS road_label
      type: postgis
      user: ''
    description: ''
    fields: 
      len: Number
      name_en: String
      osm_id: Number
      ref: String
      reflen: Number
      shield: String
    properties: 
      "buffer-size": 64
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
maxzoom: 16
minzoom: 0
name: osm2pgsql-osm-bright
